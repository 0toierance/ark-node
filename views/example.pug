
html(lang='en')
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')

    meta(name='description', content='')
    meta(name='author', content='')
    title Ark Node
    // Bootstrap core CSS
    link(href='https://cdn.jsdelivr.net/bootstrap/3.3.7/css/bootstrap.min.css', rel='stylesheet')
    link(href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css', rel='stylesheet')
    link(href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css", rel="stylesheet")
    // HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
    //if lt IE 9
    script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
    script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')

  body(style='background-image:url(https://ark.io/wp-content/uploads/2016/10/ark-planet.jpg)')
    block content
      nav.navbar.navbar-default.navbar-static-top
        .container
          .navbar-header
            button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#navbar', aria-expanded='false', aria-controls='navbar')
              span.sr-only Toggle navigation
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.navbar-brand(href='/') Ark Node
          #navbar.navbar-collapse.collapse
            ul.nav.navbar-nav
              li(class=(title == 'Home') ? 'active' : null)
                a(href='/') Home
              li(class=(title == 'About') ? 'active' : null)
                a(href='/about') About
            ul.nav.navbar-nav.navbar-right
              if user
                li.dropdown
                  a.navbar-avatar.dropdown-toggle(href='#', data-toggle='dropdown')
                    span #{user.name || user.email} &nbsp;
                    i.caret
                  ul.dropdown-menu
                    li
                      a(href='/profile') Profile
                    li.divider(role='separator')
                    li
                      a(href='/logout') Logout
              else
                li(class=(title == 'Log in') ? 'active' : null)
                  a(href='/login') Log-in
                li(class=(title == 'Register') ? 'active' : null)
                  a(href='/register') Register
          // /.nav-collapse
      .container
        .jumbotron
          h1
            img(src="https://ark.io/wp-content/uploads/2016/10/logo-red.png", alt="alt")
            |  ARK node
          h3 Congratulations you just installed ark-node sucessfully
          ul
            li nethash
              b  #{nethash}
        .row
          .col-md-6
            .well
              h3 transaction pool
              #tpoolchart

          .col-md-6
            .well
              h3 node height
              #heightchart

          .col-md-12
            .well
              h3 Transactions per block
              #txchart




    script(src='https://cdn.jsdelivr.net/jquery/3.1.1/jquery.min.js')
    script(src='https://cdn.jsdelivr.net/bootstrap/3.3.7/js/bootstrap.min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js')
    script(src='https://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js')
    script.
      var heightdata = [], tpooldata = [], txdata = [];
      function updateData(){
        $.get("/getStats", function(res){

          heightdata.push({
            date:new Date().getTime(),
            value:res.lastBlock.height
          });
          if(heightdata.length>50){
            heightdata.shift();
          }
          heightchart.setData(heightdata);

          txdata.push({
            date:new Date().getTime(),
            value:res.lastBlock.numberOfTransactions
          });
          if(txdata.length>100){
            txdata.shift();
          }
          txchart.setData(txdata);

          tpooldata.push({
            date:new Date().getTime(),
            value:res.transactionPool
          });
          if(tpooldata.length>50){
            tpooldata.shift();
          }
          tpoolchart.setData(tpooldata);


          setTimeout(updateData, 4000);
        });
      };
      var heightchart = new Morris.Line({
        element: 'heightchart',

        data: [
        ],
        pointSize:0,
        xkey: 'date',
        ykeys: ['value'],
        ymin: 'auto',
        labels: ['Height']
      });

      var tpoolchart = new Morris.Line({
        element: 'tpoolchart',

        data: [
        ],
        pointSize:0,
        xkey: 'date',
        ykeys: ['value'],
        ymin: 'auto',
        labels: ['Transaction pool']
      });

      var txchart = new Morris.Line({
        element: 'txchart',

        data: [
        ],
        pointSize:0,
        xkey: 'date',
        ykeys: ['value'],
        ymin: 'auto',
        labels: ['Transactions']
      });


      updateData();
